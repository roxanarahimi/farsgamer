"use strict";(self["webpackChunkfars_gamer"]=self["webpackChunkfars_gamer"]||[]).push([[348],{7459:function(e,t,s){s.r(t),s.d(t,{default:function(){return j}});var a=s(3396),r=s(7139);const o=e=>((0,a.dD)("data-v-083f94c3"),e=e(),(0,a.Cn)(),e),c={key:0},l={class:"border-bottom pt-3"},n={class:"d-flex w-100 h-100 py-3 px-3 inner"},i=["src"],d={class:"mb-0 px-2 text-muted"},p={class:"chat row p-5 pt-0 m-0",style:{}},g={key:0,class:"d-flex justify-content-center"},u=o((()=>(0,a._)("div",{class:"col-4 mt-3 p-3 bg-light border border-primary rounded mb-3",style:{"background-color":"lightgrey !important"}},[(0,a._)("p",null,"قوانین چت"),(0,a._)("p",null,"1."),(0,a._)("p",null,"2."),(0,a._)("p",null,"3."),(0,a._)("p",null,"4.")],-1))),h=[u],m={key:1,class:"border-primary my-5"},y={class:"w-100"},_={key:0,class:"myMsg py-1"},w={class:"m-3 mx-4"},x={key:1,class:"theirMsg"},k={class:"m-3 mx-4"},v={class:"border-top d-flex",style:{"background-color":"whitesmoke"}},b=o((()=>(0,a._)("i",{class:"bi bi-send text-primary"},null,-1))),f=[b],C=o((()=>(0,a._)("span",{style:{width:"50px","font-size":"30px","margin-top":"25px","text-align":"right"}},[(0,a._)("i",{class:"bi bi-paperclip text-primary"})],-1))),S={key:1};function q(e,t,s,o,u,b){return u.selectedChat?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",l,[(0,a._)("div",n,[(0,a._)("img",{src:u.selectedChat.user2?.profile_image,style:{width:"50px",height:"50px","border-radius":"50%"}},null,8,i),(0,a._)("div",null,[(0,a._)("p",d,(0,r.zw)(u.selectedChat.user2?.user_name),1)])])]),(0,a._)("div",p,[u.chats.length?((0,a.wg)(),(0,a.iD)("div",g,h)):(0,a.kq)("",!0),u.chats.length?((0,a.wg)(),(0,a.iD)("hr",m)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.chats,(e=>((0,a.wg)(),(0,a.iD)("div",y,[e.sender_id===u.user1?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("p",w,(0,r.zw)(e.content),1)])):(0,a.kq)("",!0),e.sender_id===u.user2?((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("p",k,(0,r.zw)(e.content),1)])):(0,a.kq)("",!0)])))),256))]),(0,a._)("div",v,[(0,a._)("span",{onClick:t[0]||(t[0]=e=>b.sendMessage(u.groupId)),style:{width:"50px","font-size":"30px","margin-top":"25px","text-align":"left"}},f),(0,a._)("input",{onKeyup:t[1]||(t[1]=e=>b.messageInput(e)),type:"text",id:"message",class:"form-control bg-white m-3",style:{width:"calc(100% - 100px)"}},null,32),C])])):((0,a.wg)(),(0,a.iD)("div",S))}var I=s(8557),D={name:"Chat",components:{BottomBar:I.Z},data(){return{selectedChat:{},groupId:localStorage.getItem("chat_g_id"),chats:[],user1:0,user2:0}},mounted(){console.log(localStorage.getItem("chat_g_id")),localStorage.getItem("chat_g_id")&&this.getMessages(localStorage.getItem("chat_g_id")),document.querySelector("#page_content").style.padding="0",document.querySelector("#page_content").style.margin="0",document.querySelector("#page_content").style.width="100%",document.querySelector("#app").style.backgroundColor="whitesmoke"},unmounted(){document.querySelector("#app").style.backgroundColor="white",document.querySelector("#page_content").style.width="calc(100% - 300px - 5rem)"},methods:{getMessages(e){axios.create({headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).get("https://server.elfiro.com/api/v1/client/chat/list/"+e).then((e=>{console.log("chats",e.data.data.group.record.chats),this.chats=e.data.data.group.record.chats,this.user1=e.data.data.group.record.user1.id,this.user2=e.data.data.group.record.user2.id,this.selectedChat=e.data.data.group.record})).catch((e=>{console.log(e)}))},messageInput(e){"Enter"==e.key&&this.sendMessage(this.groupId)},sendMessage(e){axios.create({headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).post("https://server.elfiro.com/api/v1/client/chat/list/"+e,{message:document.querySelector("#message").value}).then((t=>{document.querySelector("#message").value="",this.getMessages(e)})).catch((e=>{console.log(e)}))}}},M=s(89);const z=(0,M.Z)(D,[["render",q],["__scopeId","data-v-083f94c3"]]);var j=z}}]);
//# sourceMappingURL=chat.da6f9ca5.js.map