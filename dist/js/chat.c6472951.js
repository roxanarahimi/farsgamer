"use strict";(self["webpackChunkfars_gamer"]=self["webpackChunkfars_gamer"]||[]).push([[348],{53:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var a=s(3396),r=s(7139);const o=e=>((0,a.dD)("data-v-7b20103d"),e=e(),(0,a.Cn)(),e),l={key:0},c={class:"border-bottom pt-3"},n={class:"d-flex w-100 h-100 py-3 px-3 inner"},i=["src"],d={class:"mb-0 px-2 text-muted"},g={class:"chat row p-5 pt-0 m-0",style:{}},p={key:0,class:"text-center"},u=o((()=>(0,a._)("img",{src:"/img/66.png",style:{width:"300px"},alt:""},null,-1))),h=[u],m={key:1,class:"d-flex justify-content-center"},y=o((()=>(0,a._)("div",{class:"col-4 mt-3 p-3 bg-light border border-primary rounded mb-3",style:{"background-color":"lightgrey !important"}},[(0,a._)("p",null,"قوانین چت"),(0,a._)("p",null,"1."),(0,a._)("p",null,"2."),(0,a._)("p",null,"3."),(0,a._)("p",null,"4.")],-1))),_=[y],w={key:2,class:"border-primary my-5"},x={class:"w-100"},k={key:0,class:"myMsg py-1"},v={class:"m-3 mx-4"},b={key:1,class:"theirMsg"},f={class:"m-3 mx-4"},C={class:"border-top d-flex",style:{"background-color":"whitesmoke"}},S=o((()=>(0,a._)("i",{class:"bi bi-send text-primary"},null,-1))),q=[S],I=o((()=>(0,a._)("span",{style:{width:"50px","font-size":"30px","margin-top":"25px","text-align":"right"}},[(0,a._)("i",{class:"bi bi-paperclip text-primary"})],-1))),D={key:1};function M(e,t,s,o,u,y){return u.selectedChat?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",c,[(0,a._)("div",n,[(0,a._)("img",{src:u.selectedChat.user2?.profile_image,style:{width:"50px",height:"50px","border-radius":"50%"}},null,8,i),(0,a._)("div",null,[(0,a._)("p",d,(0,r.zw)(u.selectedChat.user2?.user_name),1)])])]),(0,a._)("div",g,[u.chats.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",p,h)),u.chats.length?((0,a.wg)(),(0,a.iD)("div",m,_)):(0,a.kq)("",!0),u.chats.length?((0,a.wg)(),(0,a.iD)("hr",w)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.chats,(e=>((0,a.wg)(),(0,a.iD)("div",x,[e.sender_id===u.user1?((0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("p",v,(0,r.zw)(e.content),1)])):(0,a.kq)("",!0),e.sender_id===u.user2?((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("p",f,(0,r.zw)(e.content),1)])):(0,a.kq)("",!0)])))),256))]),(0,a._)("div",C,[(0,a._)("span",{onClick:t[0]||(t[0]=e=>y.sendMessage(u.groupId)),style:{width:"50px","font-size":"30px","margin-top":"25px","text-align":"left"}},q),(0,a._)("input",{onKeyup:t[1]||(t[1]=e=>y.messageInput(e)),type:"text",id:"message",class:"form-control bg-white m-3",style:{width:"calc(100% - 100px)"}},null,32),I])])):((0,a.wg)(),(0,a.iD)("div",D))}var z=s(8557),j={name:"Chat",components:{BottomBar:z.Z},data(){return{selectedChat:{},groupId:localStorage.getItem("chat_g_id"),chats:[],user1:0,user2:0}},mounted(){console.log(localStorage.getItem("chat_g_id")),localStorage.getItem("chat_g_id")&&this.getMessages(localStorage.getItem("chat_g_id")),document.querySelector("#page_content").style.padding="0",document.querySelector("#page_content").style.margin="0",document.querySelector("#page_content").style.width="100%",document.querySelector("#app").style.backgroundColor="whitesmoke"},unmounted(){document.querySelector("#app").style.backgroundColor="white",document.querySelector("#page_content").style.width="calc(100% - 300px - 5rem)"},methods:{getMessages(e){axios.create({headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).get("https://server.elfiro.com/api/v1/client/chat/list/"+e).then((e=>{console.log("chats",e.data.data.group.record.chats),this.chats=e.data.data.group.record.chats,this.user1=e.data.data.group.record.user1.id,this.user2=e.data.data.group.record.user2.id,this.selectedChat=e.data.data.group.record})).catch((e=>{console.log(e)}))},messageInput(e){"Enter"==e.key&&this.sendMessage(this.groupId)},sendMessage(e){axios.create({headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).post("https://server.elfiro.com/api/v1/client/chat/list/"+e,{message:document.querySelector("#message").value}).then((t=>{document.querySelector("#message").value="",this.getMessages(e)})).catch((e=>{console.log(e)}))}}},A=s(89);const B=(0,A.Z)(j,[["render",M],["__scopeId","data-v-7b20103d"]]);var K=B}}]);
//# sourceMappingURL=chat.c6472951.js.map